{"ast":null,"code":"import _defineProperty from\"/Users/admin/Desktop/Development/React/urlshortner/url-shortner-client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/admin/Desktop/Development/React/urlshortner/url-shortner-client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/admin/Desktop/Development/React/urlshortner/url-shortner-client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import{nanoid}from\"nanoid\";import{getDatabase,child,ref,set,get}from\"firebase/database\";import{isWebUri}from\"valid-url\";import OverlayTrigger from\"react-bootstrap/OverlayTrigger\";import Tooltip from\"react-bootstrap/Tooltip\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Form=function Form(){var _useState=useState({longURL:\"\",generatedURL:\"\",loading:false,errors:[],errorMessages:{},toolTipMessage:\"Copy To Clipboard\"}),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];var onSubmit=function onSubmit(e){e.preventDefault();setFormData(_objectSpread(_objectSpread({},formData),{},{loading:true,generatedURL:\"\"}));// validate the user input\nvar isFormValid=validateInput();if(!isFormValid){return;}var generatedKey=nanoid(5);var generatedURL=\"smallurl.com/\"+generatedKey;var db=getDatabase();set(ref(db,\"/\"+generatedKey),{generatedKey:generatedKey,longURL:formData.longURL,generatedURL:generatedURL}).then(function(result){setFormData(_objectSpread(_objectSpread({},formData),{},{generatedURL:generatedURL,loading:false,errors:[]}));}).catch(function(e){//handle error\n});};//haserror\n//Checks if feild has an error\nvar hasError=function hasError(key){return formData.errors.indexOf(key)!==-1;};// handle change\n// Save the content of the form as the user is typing!\nvar handleChange=function handleChange(e){var _e$target=e.target,id=_e$target.id,value=_e$target.value;setFormData(function(){return _objectSpread(_objectSpread({},formData),{},_defineProperty({},id,value));});};var validateInput=function validateInput(){var errors=[];var errorMessages=formData.errorMessages;//Validate Long URL\nif(formData.longURL.length===0){errors.push(\"longURL\");errorMessages[\"longURL\"]=\"Please enter your URL!\";}else if(!isWebUri(formData.longURL)){errors.push(\"longURL\");errorMessages[\"longURL\"]=\"Please a URL in the form of https://www....\";}setFormData(_objectSpread(_objectSpread({},formData),{},{errors:errors,errorMessages:errorMessages// loading: false,\n}));if(errors.length>0){return false;}return true;};var copyToClipBoard=function copyToClipBoard(){navigator.clipboard.writeText(formData.generatedURL);setFormData(_objectSpread(_objectSpread({},formData),{},{toolTipMessage:\"Copied!\"}));};return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"form\",{autoComplete:\"off\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Small URL\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Enter Your Long URL\"}),/*#__PURE__*/_jsx(\"input\",{id:\"longURL\",onChange:handleChange,value:formData.longURL,type:\"url\",required:true,placeholder:\"https://www...\",className:hasError(\"longURL\")?\"form-control is-invalid\":\"form-control\"})]}),/*#__PURE__*/_jsx(\"div\",{className:hasError(\"longURL\")?\"text-danger\":\"visually-hidden\",children:formData.errorMessages.longURL}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",type:\"button\",onClick:onSubmit,children:formData.loading?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"spinner-border spinner-border-sm\",role:\"status\",\"aria-hidden\":\"true\"})}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden spinner-border spinner-border-sm\",role:\"status\",\"aria-hidden\":\"true\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Squeez\"})]})}),formData.generatedURL===\"\"?/*#__PURE__*/_jsx(\"div\",{}):/*#__PURE__*/_jsxs(\"div\",{className:\"generatedurl\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Your generated URL is: \"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{disabled:true,type:\"text\",value:formData.generatedURL,className:\"form-control\",placeholder:\"Recipient's username\",\"aria-label\":\"Recipient's username\",\"aria-describedby\":\"basic-addon2\"}),/*#__PURE__*/_jsx(\"div\",{className:\"input-group-append\",children:/*#__PURE__*/_jsx(OverlayTrigger,{placement:\"top\",overlay:/*#__PURE__*/_jsx(Tooltip,{id:\"tooltip-\".concat(\"top\"),children:formData.toolTipMessage}),children:/*#__PURE__*/_jsx(\"button\",{onClick:copyToClipBoard,\"data-toggle\":\"tooltip\",\"data-placement\":\"top\",title:\"Tooltip on top\",className:\"btn btn-outline-secondary\",type:\"button\",children:\"Copy\"})},\"top\")})]})]})]})});};export default Form;","map":{"version":3,"names":["useState","nanoid","getDatabase","child","ref","set","get","isWebUri","OverlayTrigger","Tooltip","Form","longURL","generatedURL","loading","errors","errorMessages","toolTipMessage","formData","setFormData","onSubmit","e","preventDefault","isFormValid","validateInput","generatedKey","db","then","result","catch","hasError","key","indexOf","handleChange","target","id","value","length","push","copyToClipBoard","navigator","clipboard","writeText"],"sources":["/Users/admin/Desktop/Development/React/urlshortner/url-shortner-client/src/components/Form.js"],"sourcesContent":["import { useState } from \"react\";\nimport { nanoid } from \"nanoid\";\nimport { getDatabase, child, ref, set, get } from \"firebase/database\";\nimport { isWebUri } from \"valid-url\";\nimport OverlayTrigger from \"react-bootstrap/OverlayTrigger\";\nimport Tooltip from \"react-bootstrap/Tooltip\";\n\nconst Form = () => {\n  const [formData, setFormData] = useState({\n    longURL: \"\",\n    generatedURL: \"\",\n    loading: false,\n    errors: [],\n    errorMessages: {},\n    toolTipMessage: \"Copy To Clipboard\",\n  });\n\n  const onSubmit = (e) => {\n    e.preventDefault();\n    setFormData({\n      ...formData,\n      loading: true,\n      generatedURL: \"\",\n    });\n\n    // validate the user input\n    var isFormValid = validateInput();\n    if (!isFormValid) {\n      return;\n    }\n\n    var generatedKey = nanoid(5);\n    var generatedURL = \"smallurl.com/\" + generatedKey;\n\n    const db = getDatabase();\n    set(ref(db, \"/\" + generatedKey), {\n      generatedKey: generatedKey,\n      longURL: formData.longURL,\n      generatedURL: generatedURL,\n    })\n      .then((result) => {\n        setFormData({\n          ...formData,\n          generatedURL: generatedURL,\n          loading: false,\n          errors: [],\n        });\n      })\n      .catch((e) => {\n        //handle error\n      });\n  };\n\n  //haserror\n  //Checks if feild has an error\n  const hasError = (key) => {\n    return formData.errors.indexOf(key) !== -1;\n  };\n\n  // handle change\n  // Save the content of the form as the user is typing!\n  const handleChange = (e) => {\n    const { id, value } = e.target;\n    setFormData(() => ({\n      ...formData,\n      [id]: value,\n    }));\n  };\n\n  const validateInput = () => {\n    var errors = [];\n    var errorMessages = formData.errorMessages;\n\n    //Validate Long URL\n    if (formData.longURL.length === 0) {\n      errors.push(\"longURL\");\n      errorMessages[\"longURL\"] = \"Please enter your URL!\";\n    } else if (!isWebUri(formData.longURL)) {\n      errors.push(\"longURL\");\n      errorMessages[\"longURL\"] = \"Please a URL in the form of https://www....\";\n    }\n\n    setFormData({\n      ...formData,\n      errors: errors,\n      errorMessages: errorMessages,\n      // loading: false,\n    });\n\n    if (errors.length > 0) {\n      return false;\n    }\n    return true;\n  };\n\n  const copyToClipBoard = () => {\n    navigator.clipboard.writeText(formData.generatedURL);\n    setFormData({\n      ...formData,\n      toolTipMessage: \"Copied!\",\n    });\n  };\n\n  return (\n    <div className=\"container\">\n      <form autoComplete=\"off\">\n        <h3>Small URL</h3>\n\n        <div className=\"form-group\">\n          <label>Enter Your Long URL</label>\n          <input\n            id=\"longURL\"\n            onChange={handleChange}\n            value={formData.longURL}\n            type=\"url\"\n            required\n            placeholder=\"https://www...\"\n            className={\n              hasError(\"longURL\") ? \"form-control is-invalid\" : \"form-control\"\n            }\n          />\n        </div>\n        <div\n          className={hasError(\"longURL\") ? \"text-danger\" : \"visually-hidden\"}\n        >\n          {formData.errorMessages.longURL}\n        </div>\n\n        <button className=\"btn btn-primary\" type=\"button\" onClick={onSubmit}>\n          {formData.loading ? (\n            <div>\n              <span\n                className=\"spinner-border spinner-border-sm\"\n                role=\"status\"\n                aria-hidden=\"true\"\n              ></span>\n            </div>\n          ) : (\n            <div>\n              <span\n                className=\"visually-hidden spinner-border spinner-border-sm\"\n                role=\"status\"\n                aria-hidden=\"true\"\n              ></span>\n              <span>Squeez</span>\n            </div>\n          )}\n        </button>\n\n        {formData.generatedURL === \"\" ? (\n          <div></div>\n        ) : (\n          <div className=\"generatedurl\">\n            <span>Your generated URL is: </span>\n            <div className=\"input-group mb-3\">\n              <input\n                disabled\n                type=\"text\"\n                value={formData.generatedURL}\n                className=\"form-control\"\n                placeholder=\"Recipient's username\"\n                aria-label=\"Recipient's username\"\n                aria-describedby=\"basic-addon2\"\n              />\n              <div className=\"input-group-append\">\n                <OverlayTrigger\n                  key={\"top\"}\n                  placement={\"top\"}\n                  overlay={\n                    <Tooltip id={`tooltip-${\"top\"}`}>\n                      {formData.toolTipMessage}\n                    </Tooltip>\n                  }\n                >\n                  <button\n                    onClick={copyToClipBoard}\n                    data-toggle=\"tooltip\"\n                    data-placement=\"top\"\n                    title=\"Tooltip on top\"\n                    className=\"btn btn-outline-secondary\"\n                    type=\"button\"\n                  >\n                    Copy\n                  </button>\n                </OverlayTrigger>\n              </div>\n            </div>\n          </div>\n        )}\n      </form>\n    </div>\n  );\n};\n\nexport default Form;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}